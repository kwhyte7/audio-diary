{% extends "base.html" %}
{% block body %}

<div class="flex column login container">
	<h1>login</h1>
	<input placeholder="email/username"></input>
	<input type="password" placeholder="password"></input>
	<p></p>
	<a href="/signup">Don't have an account? Sign up here.</a>
	<button onclick="login()">login</button>
</div>

{% endblock %}

{% block script %}
<script>
const messageElement = document.querySelector(".flex p");
async function login() {
	const [email, password] = Array.from(document.querySelectorAll(".flex input")).map(v => v.value);
	
	// redir to next page if response is nice
	const response = await fetch("/login", {
		method : "POST",
		headers : {"Content-type" : "application/json"},
		body : JSON.stringify({email : email, password : password})
	});

	const data = await response.json();
	
	if (data.success) {
		window.location.href = "/";
	}
	messageElement.textContent = data.message


}
</script>
{% endblock %}
